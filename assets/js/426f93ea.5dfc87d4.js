"use strict";(self.webpackChunkmowgli_docs=self.webpackChunkmowgli_docs||[]).push([[95],{5440:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>d,contentTitle:()=>l,default:()=>u,frontMatter:()=>t,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"Guide-OpenMower-Mowgli/configuration-systeme","title":"\ud83d\udcce Configuration syst\xe8me","description":"Illustration configuration-systeme","source":"@site/docs/Guide-OpenMower-Mowgli/configuration-systeme.md","sourceDirName":"Guide-OpenMower-Mowgli","slug":"/Guide-OpenMower-Mowgli/configuration-systeme","permalink":"/mowgli-docs/docs/Guide-OpenMower-Mowgli/configuration-systeme","draft":false,"unlisted":false,"editUrl":"https://github.com/Mowglifrenchtouch/mowgli-docs/edit/main/docs/Guide-OpenMower-Mowgli/configuration-systeme.md","tags":[],"version":"current","frontMatter":{"title":"\ud83d\udcce Configuration syst\xe8me","nav_order":4,"parent":"\ud83c\udfe0 Guide OpenMower","layout":"default","permalink":"/docs/Guide-OpenMower-Mowgli/configuration-systeme/"},"sidebar":"tutorialSidebar","previous":{"title":"\ud83d\udcbe Installation & pr\xe9paration Pi/SD/SSD","permalink":"/mowgli-docs/docs/Guide-OpenMower-Mowgli/installation-preparation-pi"},"next":{"title":"\ud83d\udcc0 Injection Firmware","permalink":"/mowgli-docs/docs/Guide-OpenMower-Mowgli/injection-firmware"}}');var o=r(4848),i=r(8453);const t={title:"\ud83d\udcce Configuration syst\xe8me",nav_order:4,parent:"\ud83c\udfe0 Guide OpenMower",layout:"default",permalink:"/docs/Guide-OpenMower-Mowgli/configuration-systeme/"},l="\ud83e\uddf0 Pr\xe9paration du Raspberry Pi et configuration",d={},a=[{value:"\ud83d\udee0\ufe0f \xc9tape 1 : Mise \xe0 jour de Pi OS",id:"\ufe0f-\xe9tape-1--mise-\xe0-jour-de-pi-os",level:2},{value:"\ud83d\udee3\ufe0f \xc9tape 2 : Installation de Docker",id:"\ufe0f-\xe9tape-2--installation-de-docker",level:2},{value:"\ud83e\uddf9 \xc9tape 3 : Configuration de udev",id:"-\xe9tape-3--configuration-de-udev",level:2},{value:"\ud83d\udcc5 \xc9tape 4 : Clonage du d\xe9p\xf4t",id:"-\xe9tape-4--clonage-du-d\xe9p\xf4t",level:2},{value:"\u2699\ufe0f \xc9tape 5 : Configuration de l&#39;environnement",id:"\ufe0f-\xe9tape-5--configuration-de-lenvironnement",level:2},{value:"\ud83d\ude80 \xc9tape 6 : Lancement des Conteneurs",id:"-\xe9tape-6--lancement-des-conteneurs",level:2},{value:"\u23f9\ufe0f \xc9tape 7 : Arr\xeater / mettre \xe0 jour les conteneurs Docker",id:"\ufe0f-\xe9tape-7--arr\xeater--mettre-\xe0-jour-les-conteneurs-docker",level:2},{value:"\ud83d\udcc4 \xc9tape 8 : Surveillance des Logs (optionnel)",id:"-\xe9tape-8--surveillance-des-logs-optionnel",level:2}];function c(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",...(0,i.R)(),...e.components},{Details:s}=n;return s||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{alt:"Illustration configuration-systeme",src:r(8904).A+"",width:"1024",height:"1024"})}),"\n",(0,o.jsxs)("div",{class:"alert alert--warning",children:[(0,o.jsx)("div",{class:"alert-title",children:"\u26a0\ufe0f Important"}),(0,o.jsx)("p",{children:(0,o.jsx)("strong",{children:"\u26a0\ufe0f N'oubliez pas de fixer l'adresse IP ou l'adresse MAC de votre Raspberry Pi via votre box pour qu'il soit toujours accessible. \u26a0\ufe0f"})})]}),"\n",(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"-pr\xe9paration-du-raspberry-pi-et-configuration",children:"\ud83e\uddf0 Pr\xe9paration du Raspberry Pi et configuration"})}),"\n",(0,o.jsx)(n.h2,{id:"\ufe0f-\xe9tape-1--mise-\xe0-jour-de-pi-os",children:"\ud83d\udee0\ufe0f \xc9tape 1 : Mise \xe0 jour de Pi OS"}),"\n",(0,o.jsx)(n.p,{children:"Avant de commencer, assurez-vous que votre syst\xe8me est \xe0 jour."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-sh",children:"sudo apt update && sudo apt upgrade -y\n"})}),"\n",(0,o.jsx)(n.h2,{id:"\ufe0f-\xe9tape-2--installation-de-docker",children:"\ud83d\udee3\ufe0f \xc9tape 2 : Installation de Docker"}),"\n",(0,o.jsx)(n.p,{children:"Installez Docker en ex\xe9cutant la commande suivante :"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-sh",children:"curl https://get.docker.com | sh\n"})}),"\n",(0,o.jsx)(n.h2,{id:"-\xe9tape-3--configuration-de-udev",children:"\ud83e\uddf9 \xc9tape 3 : Configuration de udev"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsx)(n.li,{children:"Cr\xe9ez et \xe9ditez le fichier de r\xe8gles udev :"}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-sh",children:"sudo nano /etc/udev/rules.d/50-mowgli.rules\n"})}),"\n",(0,o.jsxs)(n.ol,{start:"2",children:["\n",(0,o.jsx)(n.li,{children:"Ajoutez les r\xe8gles suivantes :"}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-sh",children:'SUBSYSTEM=="tty" ATTRS{product}=="Mowgli", SYMLINK+="mowgli"\n# simpleRTK USB\nSUBSYSTEM=="tty" ATTRS{idVendor}=="1546" ATTRS{idProduct}=="01a9", SYMLINK+="gps"\n# ESP USB CDC - RTK1010Board\nSUBSYSTEM=="tty" ATTRS{idVendor}=="303a" ATTRS{idProduct}=="4001", SYMLINK+="gps"\n# UM982 - WittMotion WTRTK-982\nSUBSYSTEM=="tty" ATTRS{idVendor}=="1a86" ATTRS{idProduct}=="7523", SYMLINK+="gps"\n'})}),"\n",(0,o.jsxs)("div",{class:"alert alert--info",children:[(0,o.jsx)("div",{class:"alert-title",children:"\ud83d\udd0d Astuce"}),(0,o.jsxs)("p",{children:["Si vous utilisez un GPS sp\xe9cifique, ex\xe9cutez la commande ",(0,o.jsx)("code",{children:"lsusb"})," une fois l'appareil connect\xe9 pour trouver les ",(0,o.jsx)("code",{children:"vendorId"})," et ",(0,o.jsx)("code",{children:"productID"}),"."]})]}),"\n",(0,o.jsxs)(n.ol,{start:"3",children:["\n",(0,o.jsx)(n.li,{children:"Rechargez les r\xe8gles udev :"}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-sh",children:"sudo udevadm control --reload-rules\nsudo udevadm trigger\n"})}),"\n",(0,o.jsx)(n.h2,{id:"-\xe9tape-4--clonage-du-d\xe9p\xf4t",children:"\ud83d\udcc5 \xc9tape 4 : Clonage du d\xe9p\xf4t"}),"\n",(0,o.jsx)(n.p,{children:"On r\xe9cup\xe8re le code pour la g\xe9n\xe9ration des conteneurs Docker."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-sh",children:"sudo apt install git\ngit clone https://github.com/cedbossneo/mowgli-docker\ncd mowgli-docker\n"})}),"\n",(0,o.jsx)(n.h2,{id:"\ufe0f-\xe9tape-5--configuration-de-lenvironnement",children:"\u2699\ufe0f \xc9tape 5 : Configuration de l'environnement"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:["Cr\xe9ez et \xe9ditez le fichier ",(0,o.jsx)(n.code,{children:".env"})," (il faut \xeatre dans le r\xe9pertoire mowgli-docker) :"]}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-sh",children:"sudo nano .env\n"})}),"\n",(0,o.jsxs)(n.ol,{start:"2",children:["\n",(0,o.jsxs)(n.li,{children:["Remplacez les valeurs ",(0,o.jsx)(n.code,{children:"ROS_IP"})," et ",(0,o.jsx)(n.code,{children:"MOWER_IP"})," par l'adresse IP de votre Raspberry Pi :"]}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-sh",children:"# ROS_IP est l'IP de la machine ex\xe9cutant le conteneur Docker\n# MOWER_IP est l'IP de la tondeuse\n# Lorsque vous n'\xeates pas en mode ser2net, les deux IPs doivent \xeatre les m\xeames\nROS_IP=192.168.X.XX\nMOWER_IP=192.168.X.XX\nIMAGE=ghcr.io/cedbossneo/mowgli-docker:cedbossneo\n"})}),"\n",(0,o.jsx)(n.p,{children:'Faites Ctrl "o" puis Entr\xe9e pour enregistrer, Ctrl "x" pour quitter.'}),"\n",(0,o.jsx)(n.h2,{id:"-\xe9tape-6--lancement-des-conteneurs",children:"\ud83d\ude80 \xc9tape 6 : Lancement des Conteneurs"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsx)(n.li,{children:"Lancez les conteneurs Docker :"}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-sh",children:"sudo docker compose up -d\n"})}),"\n",(0,o.jsxs)("div",{class:"alert alert--info",children:[(0,o.jsx)("div",{class:"alert-title",children:"\u2615 Patience"}),(0,o.jsx)("p",{children:"Cette \xe9tape peut \xeatre longue selon votre connexion Internet : les images Docker doivent \xeatre t\xe9l\xe9charg\xe9es."})]}),"\n",(0,o.jsxs)(n.ol,{start:"2",children:["\n",(0,o.jsx)(n.li,{children:"Mise \xe0 jour du fichier de configuration"}),"\n"]}),"\n",(0,o.jsxs)("div",{class:"alert alert--warning",children:[(0,o.jsx)("div",{class:"alert-title",children:"\u26a0\ufe0f Configuration obligatoire"}),(0,o.jsx)("p",{children:(0,o.jsx)("strong",{children:"\u26a0\ufe0f Depuis le 12/10/2024, la modification d'un fichier est obligatoire pour le bon fonctionnement de votre robot. Sans cela, celui-ci pourrait ne pas fonctionner correctement."})})]}),"\n",(0,o.jsxs)(n.p,{children:["Editez le fichier ",(0,o.jsx)(n.code,{children:"mower_config.sh"})," :"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-sh",children:"sudo nano config/om/mower_config.sh\n"})}),"\n",(0,o.jsx)(n.p,{children:"Ajoutez la ligne suivante ou modifiez la si pr\xe9sente :"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-sh",children:"export OM_NO_COMMS=true\n"})}),"\n",(0,o.jsxs)(n.p,{children:["Pour utiliser un GPS UM-9XX, il est n\xe9cessaire de modifier le param\xe8tre ",(0,o.jsx)(n.code,{children:"OM_GPS_PROTOCOL"})," pour le mettre \xe0 la valeur ",(0,o.jsx)(n.code,{children:"NMEA"}),":"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-sh",children:"# GPS protocol. Use UBX for u-blox chipsets and NMEA for everything else\nexport OM_GPS_PROTOCOL=NMEA\n"})}),"\n",(0,o.jsx)(n.p,{children:"Ensuite, appuyez sur \xab Ctrl + o \xbb pour enregistrer, validez avec la touche \xab Entr\xe9e \xbb, puis appuyez sur \xab Ctrl + x \xbb pour quitter l\u2019\xe9diteur."}),"\n",(0,o.jsx)(n.p,{children:"Enfin, red\xe9marrez le Raspberry Pi :"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-sh",children:"sudo reboot\n"})}),"\n",(0,o.jsx)(n.h2,{id:"\ufe0f-\xe9tape-7--arr\xeater--mettre-\xe0-jour-les-conteneurs-docker",children:"\u23f9\ufe0f \xc9tape 7 : Arr\xeater / mettre \xe0 jour les conteneurs Docker"}),"\n",(0,o.jsx)(n.p,{children:"Arr\xeater les conteneurs :"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-sh",children:"sudo docker compose down\n"})}),"\n",(0,o.jsxs)(s,{children:[(0,o.jsx)("summary",{children:"\ud83d\udd04 Mettre \xe0 jour les conteneurs Docker (avanc\xe9)"}),(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-sh",children:"sudo docker compose pull\nsudo docker compose up -d\n"})})]}),"\n",(0,o.jsx)(n.h2,{id:"-\xe9tape-8--surveillance-des-logs-optionnel",children:"\ud83d\udcc4 \xc9tape 8 : Surveillance des Logs (optionnel)"}),"\n",(0,o.jsxs)(s,{children:[(0,o.jsx)("summary",{children:"\ud83d\udccb Afficher les logs pour d\xe9boguer"}),(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-sh",children:"sudo docker compose logs -f\n"})}),(0,o.jsx)(n.p,{children:"Pour quitter : Ctrl + C"})]})]})}function u(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(c,{...e})}):c(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>t,x:()=>l});var s=r(6540);const o={},i=s.createContext(o);function t(e){const n=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:t(e.components),s.createElement(i.Provider,{value:n},e.children)}},8904:(e,n,r)=>{r.d(n,{A:()=>s});const s=r.p+"assets/images/configuration-systeme-7e38e16710dbf1054d1720442186fa26.png"}}]);